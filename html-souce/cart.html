<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopping Cart - Genesee Swift Track Club</title>
  <link rel="stylesheet" href="../css-source/style.css">
</head>
<body>
  <nav class="navigation-bar">
    <div class="nav-container">
      <div class="nav-logo">
        <span class="logo-text">Genesee Swift</span>
      </div>
      
      <button class="mobile-menu-toggle" onclick="toggleMenu()" aria-label="Toggle menu">
        <span class="hamburger"></span>
        <span class="hamburger"></span>
        <span class="hamburger"></span>
      </button>

      <div class="nav-content">
        <div class="nav-links">
          <a href="index.html" class="nav-link">Home</a>
          
          <div class="nav-dropdown">
            <button class="nav-link dropdown-trigger">
              About
              <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                <path d="M1 1.5L6 6.5L11 1.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </button>
            <div class="dropdown-menu">
              <a href="about.html" class="dropdown-item">About Us</a>
              <a href="coaches.html" class="dropdown-item">Coaches</a>
              <a href="contact.html" class="dropdown-item">Contact</a>
            </div>
          </div>

          <div class="nav-dropdown">
            <button class="nav-link dropdown-trigger">
              Programs
              <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                <path d="M1 1.5L6 6.5L11 1.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </button>
            <div class="dropdown-menu">
              <a href="Offerings.html" class="dropdown-item">Offerings</a>
              <a href="register.html" class="dropdown-item">Register</a>
            </div>
          </div>

          <a href="upcoming-events.html" class="nav-link">Events</a>
          <a href="gallery.html" class="nav-link">Gallery</a>
          
          <div class="nav-dropdown">
            <button class="nav-link dropdown-trigger">
              Support
              <svg class="dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none">
                <path d="M1 1.5L6 6.5L11 1.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </button>
            <div class="dropdown-menu">
              <a href="support.html" class="dropdown-item">Support</a>
              <a href="donate.html" class="dropdown-item">Donate</a>
              <a href="sponsors.html" class="dropdown-item">Sponsorships</a>
            </div>
          </div>
        </div>

        <div class="nav-actions">
          <div class="cart-shop-container">
            <div class="shop-btn-wrapper">
              <a href="shop.html" class="nav-btn nav-btn-secondary">Shop<span class="mobile-cart-text"></span></a>
              <span class="cart-badge">0</span>
            </div>
            <div class="cart-preview">
              <div class="cart-preview-header">
                <span>Cart</span>
                <span class="cart-count">0</span>
              </div>
              <div class="cart-items"></div>
              <div class="cart-empty">Your cart is empty</div>
              <div class="cart-preview-footer">
                <div class="cart-total">
                  <span class="cart-total-label">Total:</span>
                  <span class="cart-total-amount">$0.00</span>
                </div>
                <a href="cart.html" class="cart-view-btn">View Cart</a>
              </div>
            </div>
          </div>
          <a href="register.html" class="nav-btn nav-btn-primary">Get Started</a>
        </div>
      </div>
    </div>
  </nav>
  <div class="menu-backdrop" onclick="toggleMenu()"></div>

  <div class="page-wrapper">
    <div class="cart-page">
      <div class="cart-header">
        <h1>Shopping Cart</h1>
        <p class="cart-item-count">0 items</p>
      </div>

      <div class="cart-content">
        <div class="cart-items-section">
          <div id="cartItemsList"></div>
          <div id="emptyCartMessage" class="empty-cart-message">
            <div class="empty-cart-icon">ðŸ›’</div>
            <h2>Your cart is empty</h2>
            <p>Add some items from our shop to get started!</p>
            <a href="shop.html" class="shop-now-btn">Shop Now</a>
          </div>
        </div>

        <div class="cart-summary">
          <h2>Order Summary</h2>
          <div class="summary-row">
            <span>Subtotal:</span>
            <span id="summarySubtotal">$0.00</span>
          </div>
          <div class="summary-row">
            <span>Shipping:</span>
            <span id="summaryShipping">Calculated at checkout</span>
          </div>
          <div class="summary-row">
            <span>Tax:</span>
            <span id="summaryTax">Calculated at checkout</span>
          </div>
          <div class="summary-divider"></div>
          <div class="summary-row summary-total">
            <span>Total:</span>
            <span id="summaryTotal">$0.00</span>
          </div>
          <button class="checkout-btn" id="checkoutBtn">Proceed to Checkout</button>
          <a href="shop.html" class="continue-shopping">Continue Shopping</a>
        </div>
      </div>
    </div>
  </div>

  <script src="../js-source/cart.js"></script>
  <script src="../js-source/nav-bar.js"></script>
  <script>
    // Render full cart page
    function renderCartPage() {
      const cartItemsList = document.getElementById('cartItemsList');
      const emptyMessage = document.getElementById('emptyCartMessage');
      const itemCount = document.querySelector('.cart-item-count');
      const summarySubtotal = document.getElementById('summarySubtotal');
      const summaryTotal = document.getElementById('summaryTotal');
      const checkoutBtn = document.getElementById('checkoutBtn');
      const cartSummary = document.querySelector('.cart-summary');

      const items = cart.items;
      const totalItems = cart.getTotalItems();
      const totalPrice = cart.getTotalPrice();

      // Update item count
      itemCount.textContent = `${totalItems} ${totalItems === 1 ? 'item' : 'items'}`;

      if (items.length === 0) {
        cartItemsList.style.display = 'none';
        emptyMessage.style.display = 'flex';
        cartSummary.style.display = 'none';
        return;
      }

      cartItemsList.style.display = 'block';
      emptyMessage.style.display = 'none';
      cartSummary.style.display = 'block';

      // Render cart items
      cartItemsList.innerHTML = items.map(item => `
        <div class="cart-page-item">
          <div class="cart-page-item-image">IMG</div>
          <div class="cart-page-item-details">
            <h3 class="cart-page-item-name">${item.name}</h3>
            <p class="cart-page-item-info">Size: ${item.size}</p>
            <p class="cart-page-item-price">$${item.price.toFixed(2)}</p>
          </div>
          <div class="cart-page-item-actions">
            <div class="quantity-controls">
              <button class="quantity-btn" onclick="updateItemQuantity('${item.id}', '${item.size}', ${item.quantity - 1})">âˆ’</button>
              <span class="quantity">${item.quantity}</span>
              <button class="quantity-btn" onclick="updateItemQuantity('${item.id}', '${item.size}', ${item.quantity + 1})">+</button>
            </div>
            <p class="item-total">$${(item.price * item.quantity).toFixed(2)}</p>
            <button class="remove-btn" onclick="removeCartItem('${item.id}', '${item.size}')">Remove</button>
          </div>
        </div>
      `).join('');

      // Update summary
      summarySubtotal.textContent = `$${totalPrice.toFixed(2)}`;
      summaryTotal.textContent = `$${totalPrice.toFixed(2)}`;
    }

    function updateItemQuantity(id, size, newQuantity) {
      cart.updateQuantity(id, size, newQuantity);
      renderCartPage();
    }

    function removeCartItem(id, size) {
      if (confirm('Remove this item from cart?')) {
        cart.removeItem(id, size);
        renderCartPage();
      }
    }

    // Checkout button
    document.getElementById('checkoutBtn').addEventListener('click', () => {
      alert('Checkout functionality coming soon!');
    });

    // Initial render
    renderCartPage();
  </script>
  <script src="../js-source/loading.js"></script>
</body>
</html>
